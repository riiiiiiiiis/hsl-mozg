{% extends "base.html" %}

{% block title %}–ù–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å{% endblock %}

{% block content %}
<h1 class="mb-4">‚è≥ –ù–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏</h1>

{% for status_code, status_info in statuses.items() %}
    {% if status_info.participants %}
    <div class="card mb-4">
        <div class="card-header bg-{{ status_info.color }} text-white">
            <h5 class="mb-0">{{ status_info.icon }} {{ status_info.name }} 
                <span class="badge bg-white text-dark">{{ status_info.participants|length }} —á–µ–ª.</span>
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                {% for participant in status_info.participants %}
                <div class="col-md-6">
                    <div class="user-card {% if participant.is_overdue %}overdue{% endif %}">
                        <strong>{{ participant.first_name or '–ë–µ–∑ –∏–º–µ–Ω–∏' }}</strong>
                        {% if participant.username %}
                            <span class="text-muted">@{{ participant.username }}</span>
                        {% endif %}
                        <br>
                        <small>
                            üìö {{ participant.chosen_course }}<br>
                            ID: {{ participant.user_id }}<br>
                            –î–∞—Ç–∞: {{ participant.created_at }}<br>
                            <span class="{% if participant.is_overdue %}text-danger{% else %}text-muted{% endif %}">
                                –ü—Ä–æ—à–ª–æ: {{ participant.days_passed }} –¥–Ω. {{ participant.hours_passed }} —á.
                                {% if participant.is_overdue %}
                                    <strong>‚ö†Ô∏è –ù–µ –æ–ø–ª–∞—Ç–∏–ª –±–æ–ª–µ–µ —Å—É—Ç–æ–∫!</strong>
                                {% endif %}
                            </span>
                        </small>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
{% endfor %}

{% if not statuses[0].participants and not statuses[1].participants and not statuses[-1].participants %}
<div class="alert alert-success">
    –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∏ –æ–ø–ª–∞—Ç—É! üéâ
</div>
{% endif %}
{% endblock %}