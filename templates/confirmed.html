{% extends "base.html" %}

{% block title %}–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å{% endblock %}

{% block content %}
<h1 class="mb-4">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏</h1>

<div class="alert alert-success">
    <strong>–í—Å–µ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:</strong> {{ total }} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
</div>

{% if user_ids %}
<div class="card mb-4">
    <div class="card-header">
        <h5>üí¨ User IDs –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏</h5>
    </div>
    <div class="card-body">
        <code>{{ user_ids }}</code>
        <br><br>
        <a href="/prepare-messaging" class="btn btn-primary">–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</a>
    </div>
</div>
{% endif %}

{% for course_name, participants in courses.items() %}
<div class="card mb-4">
    <div class="card-header">
        <h5>üìö {{ course_name }} <span class="badge bg-primary">{{ participants|length }} —á–µ–ª.</span></h5>
    </div>
    <div class="card-body">
        <div class="row">
            {% for participant in participants %}
            <div class="col-md-6">
                <div class="user-card">
                    <strong>{{ participant.first_name or '–ë–µ–∑ –∏–º–µ–Ω–∏' }}</strong>
                    {% if participant.username %}
                        <span class="text-muted">@{{ participant.username }}</span>
                    {% endif %}
                    <br>
                    <small class="text-muted">
                        ID: {{ participant.user_id }}<br>
                        –î–∞—Ç–∞: {{ participant.created_at }}
                    </small>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endfor %}

{% if not courses %}
<div class="alert alert-warning">
    –ù–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
</div>
{% endif %}
{% endblock %}