import os
import sys
import psycopg2

# –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —Å–∫—Ä–∏–ø—Ç –º–æ–≥ –Ω–∞–π—Ç–∏ –≤–∞—à —Ñ–∞–π–ª config.py
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

# –ü–æ–ª—É—á–∞–µ–º DATABASE_URL –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
DATABASE_URL = os.getenv("DATABASE_URL")
if not DATABASE_URL:
    raise ValueError("No DATABASE_URL found in environment variables")

def update_course_description(course_id, new_description):
    """–û–±–Ω–æ–≤–ª—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º."""
    conn = None
    try:
        conn = psycopg2.connect(DATABASE_URL)
        with conn.cursor() as cur:
            cur.execute(
                "UPDATE courses SET description = %s WHERE id = %s",
                (new_description, course_id)
            )
            conn.commit()
            print(f"‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞ ID={course_id} —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!")
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        if conn:
            conn.rollback()
    finally:
        if conn:
            conn.close()

# –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫—É—Ä—Å–∞ CORE (ID=1)
core_description = """–¢–†–ï–¢–ò–ô –ü–û–¢–û–ö –í–ê–ô–ë–ö–û–î–ò–ù–ì–ê

–ù–∞—É—á–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–∞–π—Ç—ã, –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ Telegram-–±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥ —Å AI

+ –æ—Å–≤–æ–∏—Ç–µ –ø—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ –∏ –ø–æ–π–º—ë—Ç–µ –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ AI –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

üéØ –ë–ï–ó –ù–ê–í–´–ö–û–í –ü–†–û–ì–†–ê–ú–ú–ò–†–û–í–ê–ù–ò–Ø

üìö –§–û–†–ú–ê–¢:
‚Ä¢ –í–∏–¥–µ–æ-—É—Ä–æ–∫–∏ + —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
‚Ä¢ 3 –ª–∞–π–≤–∞ —Å –ø—Ä–∞–∫—Ç–∏–∫–æ–π
‚Ä¢ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–æ–º–∞—à–∫–∏ —Å —Ä–∞–∑–±–æ—Ä–æ–º
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –Ω–∞–≤—Å–µ–≥–¥–∞

üõ† –ò–°–ü–û–õ–¨–ó–£–ï–ú:
–ü–æ—Å–ª–µ–¥–Ω–∏–µ –º–æ–¥–µ–ª–∏: OpenAI o3, Google Gemini 2.5 Pro, Anthropic Claude Sonnet 4
–í–∞–π–±–∫–æ–¥–µ—Ä—Å–∫–∏–µ –∞–ø–ø—ã: Cursor, Bolt, Gemini CLI, Claude Code

‚Ä¢ –í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –∑–∞–ø–∏—Å–∏
‚Ä¢ –ó–∞–∫—Ä—ã—Ç—ã–π —á–∞—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
‚Ä¢ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –¥–æ–º–∞—à–∫–∞–º

üìÖ –°—Ç–∞—Ä—Ç: 12 –∞–≤–≥—É—Å—Ç–∞
‚è∞ –ó–∞–Ω—è—Ç–∏—è –ø–æ —Å—Ä–µ–¥–∞–º –≤ 21:00 –ø–æ –º—Å–∫

–û–ø–ª–∞—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ –∫–∞—Ä—Ç—ã –¢-–ë–∞–Ω–∫–∞, –ö–∞—Å–ø–∏, –≤ –ø–µ—Å–æ –∏–ª–∏ USDT –Ω–∞ –∫—Ä–∏–ø—Ç–æ –∫–æ—à–µ–ª–µ–∫."""

# –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫—É—Ä—Å–∞ EXTRA (ID=2)
extra_description = """‚úåÔ∏è –í–¢–û–†–û–ô –ü–û–¢–û–ö –í–ê–ô–ë–ö–û–î–ò–ù–ì–ê (–†–ê–°–®–ò–†–ï–ù–ù–´–ô)

"–Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–≤–∞–ª–∞—Å—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ. –ö—É—Ä—Å –æ—Ç–∫—Ä—ã–ª –¥—Ä—É–≥–æ–π –º–∏—Ä" ‚Äî –†–∞–¥–∏—Å–ª–∞–≤–∞
"–ù–∞–≤–∞–π–±–∫–æ–¥–∏–ª–∞ –º—É–∂—É —Å–∞–π—Ç" ‚Äî –ù–∞—Å—Ç—è

–ù–∞—É—á–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–∞–π—Ç—ã, –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ Telegram-–±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥ —Å AI

+ –æ—Å–≤–æ–∏—Ç–µ –ø—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ –∏ –ø–æ–π–º—ë—Ç–µ –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ AI –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

üéØ –ë–ï–ó –ù–ê–í–´–ö–û–í –ü–†–û–ì–†–ê–ú–ú–ò–†–û–í–ê–ù–ò–Ø

üìö –§–û–†–ú–ê–¢:
‚Ä¢ –í–∏–¥–µ–æ-—É—Ä–æ–∫–∏ + —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
‚Ä¢ 3 –ª–∞–π–≤–∞ —Å –ø—Ä–∞–∫—Ç–∏–∫–æ–π
‚Ä¢ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–æ–º–∞—à–∫–∏ —Å —Ä–∞–∑–±–æ—Ä–æ–º
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –Ω–∞–≤—Å–µ–≥–¥–∞

üõ† –ò–°–ü–û–õ–¨–ó–£–ï–ú:
–ü–æ—Å–ª–µ–¥–Ω–∏–µ –º–æ–¥–µ–ª–∏: OpenAI o3, Google Gemini 2.5 Pro, Anthropic Claude Sonnet 4
–í–∞–π–±–∫–æ–¥–µ—Ä—Å–∫–∏–µ –∞–ø–ø—ã: Cursor, Windsurf, Bolt, Gemini CLI

‚≠ê EXTRA ($200):
‚Ä¢ –í—Å—ë –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ CORE +
‚Ä¢ –î–æ—Å—Ç—É–ø –≤ –ª–∏—á–∫—É –Ω–∞ –≤—Ä–µ–º—è –∫—É—Ä—Å–∞
‚Ä¢ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∑–∞–Ω—è—Ç–∏–µ –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è

üìÖ –°—Ç–∞—Ä—Ç: 23 –∏—é–ª—è
‚è∞ –ó–∞–Ω—è—Ç–∏—è –ø–æ —Å—Ä–µ–¥–∞–º –≤ 21:00 –ø–æ –º—Å–∫

–û–ø–ª–∞—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ –∫–∞—Ä—Ç—ã –¢-–ë–∞–Ω–∫–∞, –ö–∞—Å–ø–∏, –≤ –ø–µ—Å–æ –∏–ª–∏ USDT –Ω–∞ –∫—Ä–∏–ø—Ç–æ –∫–æ—à–µ–ª–µ–∫."""

if __name__ == "__main__":
    print("–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:")
    print("1 - –í–∞–π–± –∫–æ–¥–∏–Ω–≥ CORE")
    print("2 - –í–∞–π–± –∫–æ–¥–∏–Ω–≥ EXTRA")
    
    choice = input("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä (1 –∏–ª–∏ 2): ").strip()
    
    if choice == "1":
        update_course_description(1, core_description)
    elif choice == "2":
        update_course_description(2, extra_description)
    else:
        print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –í–≤–µ–¥–∏—Ç–µ 1 –∏–ª–∏ 2.")